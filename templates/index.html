<!-- Include stylesheet -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="https://cdn.jsdelivr.net/npm/quilljs-markdown@latest/dist/quilljs-markdown.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.0.3/showdown.min.js" integrity="sha512-vx8rJNrYIZPDr290AV2tL04x0CKjLHSnTXrHMeb1kqbhfGwBnclPDOWIWxRiVS6Oe1oGzk5MzNz/eLzVku30kg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Bootstrap-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<script src="configManagement.js"></script>
<script src="formSerialization.js"></script>


<h1 id="title">Available files</h1>
<!-- TODO: Custom parsing for gallery-->
<a href="/images" class="btn btn-info" role="button">Click here to see all images</a>

<a href="/preview" class="btn btn-info" role="button">Click here to see a site preview</a>


<h2>Config (comming soon)</h2>
<div id="config" style="padding-left: 15px;padding-right: 15px;">
  <form id="configForm">
  <!--This will be filled with the config that exists-->
  </form>
</div>

<button onclick=serializeCurrentContent()>Click me</button>

<div class="container">
<!-- TODO: make each section an accordion-->
{% for section in files %}
<div class="row">
<h2 class=" col-lg-12">{{section}}</h2>
{% for file in files[section] %}
<div class="card col-md-auto" style="width: 18rem;">
  <div class="card-body">
    <h5 class="card-title">{{file}}</h5>
    <a href="/content/{{section}}/{{file}}" class="btn btn-primary">Open</a>
  </div>
</div>
{% endfor %}
</div> <!--End of row--> 
<br>
{% endfor %}

</div>

<script>
    fetch("/config").then(response => response.text()).then(text => {
        console.log(text);                   // Display config
        console.log(typeof text);                   // Display config
        var config = JSON.parse(text);
        displayconfig(config);
    });
</script>